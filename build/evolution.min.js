!function(a,b){b.evolution=a;var c=a.$$||function(a){return c[a]||(c[a]={}),c[a]},d=c("c"),e=c("i"),f=c("p");a.$$=c;var g=function(a){return Array.prototype.slice.call(a)},h=function(a){var b=g(arguments),c=b[1];"function"==typeof c?this.c[a]=c():(d[a]=b[2],d[a].$inject=c,d[a].$internal=this.i)},i=function(){h.apply({i:!1,c:a},g(arguments))},j=function(){h.apply({i:!0,c:e},g(arguments))},k=function(b,c){f[b]=!0;var g,h=c.$inject,i=[];for(var j in h)if(h.hasOwnProperty(j)&&(g=h[j],d[g])){if(f.hasOwnProperty(g))throw new Error('Cyclical reference: "'+b+'" referencing "'+g+'"');k(g,d[g]),delete d[g]}if(!a[b]&&!e[b]){for(var l in h)g=h[l],i.push(a.hasOwnProperty(g)&&a[g]||e.hasOwnProperty(g)&&e[g]);c.$internal?e[b]=c.apply(null,i)||b:a[b]=c.apply(null,i)||b}Object.defineProperty(a,"$$",{enumerable:!1,writable:!1}),delete f[b]};j("collision",["getDistance"],function(a){function b(b,c){for(var d,e,f=0;f<c.length;f+=1)if(d=c[f],e=a(b.x,b.y,d.x,d.y),b!==d&&e<b.radius+d.radius)return d}return b}),j("main",["cell","mouseControl","AIControl","collision"],function(b,c,d,e){function f(){return Math.random()*m}function g(){return Math.random()*n}function h(a){for(o=0;a>o;o+=1){var c=b.create(q,f(),g(),2*Math.random()+2);c.type="pellet",s.push(c)}}function i(){q.clearRect(0,0,600,600);var a,b,c,d;for(a=0;a<s.length;a+=1)b=s[a],b.update();for(a=0;a<s.length;a+=1)b=s[a],b.speed&&(b.speed=m/(.5*b.radius)/30,c=e(b,s),c&&c.radius<b.radius&&(b.eat(c),"ai"===c.type?d=r.indexOf(c):c===p?console.log("game over"):"pellet"===c.type&&h(1),s.splice(s.indexOf(c),1))),b.draw()}function j(a){for(var b,c=0;c<s.length;c+=1)if(b=s[c].id,b&&a===b.toString())return s[c]}function k(){function a(){-1!==s.indexOf(p)&&(c.send({player:{id:p.id.toString(),x:p.x,y:p.y,radius:p.radius,color:p.color}}),c.onMessage(function(a){var c;(c=j(a.player.id))||(c=b.create(q,a.player.x,a.player.y,t,2,a.player.color),c.id=a.player.id,s.push(c)),c.x=a.player.x,c.y=a.player.y,c.radius=a.player.radius}),setTimeout(a,20))}var c=new P2P("g5ezqak33ze3766r","evolution",p);c.connect(a)}window.hb=a;var l=document.querySelector(".evolution"),m=600,n=600;l.width=m,l.height=n;var o,p,q=l.getContext("2d"),r=[],s=[],t=7.5;p=b.create(q,250,250,t,2,"blue"),p.id=Date.now(),p.name=prompt("Please enter your name"),s.push(p),c(l,p),setInterval(i,20),h(100),k()}),i("getAngle",function(){return function(a,b,c,d){return Math.atan2(d-b,c-a)}}),i("getPointOnCircle",function(){return function(a,b,c,d){return{x:a+c*Math.cos(d),y:b+c*Math.sin(d)}}}),j("mouseControl",[],function(){function a(a,b){function c(a){d.x=a.offsetX,d.y=a.offsetY,b.setTargetPoint(d)}var d=this;d.x=0,d.y=0,a.addEventListener("mousemove",c)}return function(b,c){return new a(b,c)}}),j("AIControl",["getDistance"],function(a){function b(b,c){function d(){f.x=Math.random()*g,f.y=Math.random()*h}function e(b){var e=a(c.x,c.y,f.x,f.y);e<c.speed&&d(),c.setTargetPoint(f)}var f=this;f.x=0,f.y=0;var g=b.offsetWidth,h=b.offsetHeight;d(),setInterval(e,20)}return function(a,c){return new b(a,c)}}),i("getDistance",function(){return function(a,b,c,d){return Math.sqrt((c-=a)*c+(d-=b)*d)}}),j("cell",["getAngle","getPointOnCircle"],function(a,b){function c(a,b,c,d,e,f){this.context=a,this.x=b,this.y=c,this.radius=d,this.speed=e||0,this.color=f||"green",this.lastPoint={x:b,y:c}}return c.prototype={setTargetPoint:function(a){this.lastPoint=a},area:function(){return Math.PI*this.radius*this.radius},eat:function(a){var b=this.area()+a.area(),c=b/Math.PI;this.radius=Math.sqrt(c)},update:function(){var c=this.lastPoint;if(this.speed){var d=a(this.x,this.y,c.x,c.y),e=b(this.x,this.y,this.speed,d);this.x=e.x,this.y=e.y}},draw:function(){this.context.beginPath(),this.context.arc(this.x,this.y,this.radius,0,2*Math.PI,!1),this.context.fillStyle=this.color,this.context.fill(),this.context.lineWidth=1,this.context.strokeStyle="#003300",this.context.stroke()}},{create:function(a,b,d,e,f,g){return new c(a,b,d,e,f,g)}}}),i("http",["extend"],function(a){function b(a){this.init(a)}function c(a){var b,c,e=d(this.getAllResponseHeaders()),f=this.responseText.trim();return f&&(b=f[0],c=f[f.length-1]),(f&&"{"===b&&"}"===c||"["===b&&"]"===c)&&(f=f?JSON.parse(f.replace(/\/\*.*?\*\//g,"")):f),{data:f,request:{method:a.method,url:a.url,data:a.data,headers:a.headers},headers:e,status:this.status}}function d(a){for(var b,c=a.split("\n"),d={},e=0,f=c.length;f>e;)b=c[e].split(": "),b[0]&&b[1]&&(b[0]=b[0].split("-").join("").split(""),b[0][0]=b[0][0].toLowerCase(),d[b[0].join("")]=b[1]),e+=1;return d}function e(b,c){return a(b,c)}function f(a){return!(!m.intercept||!m.intercept(a,b))}var g,h=function(a){var b=[];for(var c in a)a.hasOwnProperty(c)&&b.push(encodeURIComponent(c)+"="+encodeURIComponent(a[c]));return b.join("&")},i=window,j=function(){var a;return i.XMLHttpRequest&&"withCredentials"in new i.XMLHttpRequest?a=i.XMLHttpRequest:i.XDomainRequest&&(a=i.XDomainRequest),a}(),k=["head","get","post","put","delete"],l=k.length,m={};for(b.prototype.init=function(a){var b=this;return b.xhr=new j,b.method=a.method,b.url=a.url,b.success=a.success,b.error=a.error,b.data=a.data,b.headers=a.headers,a.credentials===!0&&(b.xhr.withCredentials=!0),b.send(),b},b.prototype.send=function(){var a=this;if("GET"===a.method&&a.data){var b=a.url.indexOf("?")>-1?"&":"?";a.url+=b+h(a.data)}else a.data=JSON.stringify(a.data);return void 0!==a.success&&(a.xhr.onload=function(){function b(){e.status>=200&&e.status<400?a.success.call(e,d):void 0!==a.error&&a.error.call(e,d)}var d=c.call(this,a),e=this;this.onloadInterceptor?this.onloadInterceptor(b,d):b()}),void 0!==a.error&&(a.xhr.error=function(){var b=c.call(this,a);a.error.call(this,b)}),a.xhr.open(a.method,a.url,!0),void 0!==a.headers&&a.setHeaders(),a.xhr.send(a.data,!0),a},b.prototype.setHeaders=function(){var a,b=this,c=b.headers;for(a in c)c.hasOwnProperty(a)&&b.xhr.setRequestHeader(a,c[a]);return b},g=0;l>g;g+=1)!function(){var a=k[g];m[a]=function(c,d,g){var h={};if(void 0===c)throw new Error("CORS: url must be defined");return"object"==typeof c?h=c:("function"==typeof d&&(h.success=d),"function"==typeof g&&(h.error=g),h.url=c),h.method=a.toUpperCase(),e(h,m.defaults),f(h)?void 0:new b(h).xhr}}();return m.intercept=null,m.defaults={headers:{}},m}),i("extend",["toArray"],function(a){var b=function(c,d){var e,f,g,h=a(arguments),i=1,j=h.length,k=this||{};for(!c&&d&&"object"==typeof d&&(c={});j>i;){e=h[i];for(f in e)e.hasOwnProperty(f)&&("length"===f&&c instanceof Array||(c[f]&&"object"==typeof c[f]&&!e[f]instanceof Array?c[f]=b.apply(k,[c[f],e[f]]):e[f]instanceof Array?(g=k&&k.concat?(c[f]||[]).concat(e[f]):e[f],k&&k.arrayAsObject?(c[f]||(c[f]={length:g.length}),c[f]instanceof Array&&(c[f]=b.apply(k,[{},c[f]]))):c[f]=c[f]||[],g.length&&(c[f]=b.apply(k,[c[f],g]))):e[f]&&"object"==typeof e[f]?(k.objectAsArray&&"number"==typeof e[f].length&&(c[f]instanceof Array||(c[f]=b.apply(k,[[],c[f]]))),c[f]=b.apply(k,[c[f]||{},e[f]])):(k.override!==!1||void 0===c[f])&&(c[f]=e[f])));i+=1}return c};return b}),i("toArray",["isArguments","isArray","isUndefined"],function(a,b,c){var d=function(d){if(a(d))return Array.prototype.slice.call(d,0)||[];try{if(b(d))return d;if(!c(d))return[].concat(d)}catch(e){}return[]};return d}),i("isArguments",["toString"],function(a){var b=function(b){var c=String(b),d="[object Arguments]"===c;return d||(d="[object Array]"!==c&&null!==b&&"object"==typeof b&&"number"==typeof b.length&&b.length>=0&&(!b.callee||"[object Function]"===a.call(b.callee))),d};return b}),i("isArray",function(){Array.prototype.__isArray=!0,Object.defineProperty(Array.prototype,"__isArray",{enumerable:!1,writable:!0});var a=function(a){return a?!!a.__isArray:!1};return a}),i("isUndefined",function(){var a=function(a){return"undefined"==typeof a};return a});for(var l in d)k(l,d[l])}(this.evolution||{},function(){return this}());
//# sourceMappingURL=evolution.min.js.map